### ✏️ Internet Protocol

Internet Protocol은 인터넷에 연결되어 있는 모든 장치들을 식별할 수 있도록 각각의 장비에 부여되는 고유 주소이다.

IP는 일반적으로 192.168.0.1과 같이 마침표로 구분된 4개의 숫자가 있는 점으로 분리된 10진수 형식으로 표시된다.

IP는 32bit로 이루어진 주소이며, 1bit가 2이니까 2의 32승, 약 43억개의 주소를 가지게 된다.

***IP 구조***

IP는 네트워크 ID + 호스트 ID로 구성되어 진다.
- 네트워크 ID : 네트워크를 나타내는 ID
- 호스트 ID : 네트워크에 포함된 호스트를 나타내는 ID

***IP 클래스***

IP 클래스는 예전에 IPv4를 사용했을 때 IP를 할당하는 방법이었다. (클래스 방식이 아닌 CIDR 방식으로 할당하도록 바뀌었다고 한다.)

IP 주소를 8비트로 4등분을 하면, 각각을 옥텟(Octet)이라 부른다. 각 옥탯별로 0~255개의 범위가 되므로 각각 256개가 들어갈 수 있게 된다.

이 옥텟 별로 IP의 클래스를 A,B,C로 나눌 수 있다.

각 클래스마다 네트워크 ID와 호스트 ID 부분 범위가 서로 다르고 이렇게 하면 각 클래스마다 할당되는 총 호스트 갯수가 나누어져 보다 체계적으로 관리할 수 있게 된다.

|클래스|주소|서브넷 마스크|호스트 개수|
|---|---|---|---|
|A|1.0.0.0 ~ 127.255.255.255|255.0.0.0|2^24-2 = 16,777,214 개|
|B|128.0.0.0 ~ 191.255.255.255|255.255.0.0|2^16-2 = 65,534개|
|C|192.0.0.0 ~ 223.255.255.255|255.255.255.0|2^8-2 = 256개|

A 클래스
- 처음 8bit가 네트워크 ID이며, 나머지 24bit가 호스트 ID로 사용된다.
- 첫번째 옥텟의 비트는 항상 0으로 고정된다.
- 첫 옥텍이 0과 127로 시작하는 주소는 예약이 되어 있어 사용할 수 없다.
  - 0.0.0.0 : 미지정 주소
  - 127.0.0.0 : 루프백 주소

B 클래스
- 처음 16bit가 네트워크 ID이며, 나머지 16bit가 호스트 ID로 사용된다.
- 첫번째 옥텟의 비트는 항상 10으로 고정된다.

C 클래스
- 처음 24bit가 네트워크 ID이며, 나머지 8bit가 호스트 ID로 사용된다.
- 첫번째 옥텟의 비트는 항상 110으로 고정된다.

***네트워크 주소와 브로드 캐스트 주소***

IP 주소에서 사용할 수 없는 주소가 두가지가 존재한다.

가장 첫번째 호스트 주소는 네트워크 자체를 지칭하며, 호스트 ID가 모두 0인 주소이다.

브로드 캐스트 주소는 네트워크의 모든 호스트로 데이터를 전달하기 위한 통로이고 호스트 ID가 모두 1인 주소이다.

이외에도 192.168.0.1과 같이 공유기(라우터)가 사용하는 IP 주소가 있다.

### ✏️ Subnet

부족한 IP 주소를 해결하기 위해 IP 클래스를 도입했지만 여전히 비효율적인 현상이 계속 되었고 IP를 사용하는 네트워크 장치 수에 따라 효율적으로 사용할 수 있는 Subnet 개념이 등장하게 되었다.

Subnet은 하나의 네트워크가 분할되어 나눠진 작은 네트워크이다.

Subnet을 만들기 위해 네트워크를 분할하는 것을 Subnettin이라고 하고 Subnet Mask를 통해 계산되어 수행된다.

***Subnet Mask***

Subnet Mask는 IP 주소에서 네트워크 ID와 호스트 ID로 구분하기 위한 목적으로 만들어 졌다.

Subnet Mask는 IP 주소와 똑같은 32비트 2진수로 표현되는데 다른 점은 연속된 1과 연속된 0으로 구성되어있다는 것이다.

***Prefix 표현***

Subnet Mask를 보다 간소화해서 표현할 수도 있는데 IP 주소가 192.168.0.1/24 라면 뒤에 /24가 서브넷 마스크를 표현한 것이다.

/24 라는 뜻은 32비트 중 앞에서부터 차례대로 1의 개수가 24개라는 의미이다. 즉, 네트워크에 해당하는 비트의 수로 표시하는 방식을 말한다고 보면 된다.

### ✏️ Subnetting

Subnetting은 IP 주소를 효울적으로 나누어 사용하기 위한 방법을 일컫는다.

네트워크 성능 보장, 자원을 효율적으로 분배하기 위해 네트워크 영역과 호스트 영역을 다시 작은 영역으로 나누는데 이렇게 하면 IP 할당 범위를 더 작은 단위로 나눌 수 있게 된다.

256개의 IP 주소를 가지는 C 클래스에서 ㄱ기업에게는 128개를 ㄴ, ㄷ기업에는 64개의 네트워크 주소를 할당할 수 있다.

***192.168.10.0/24***

128개씩 두개로 나누기 위해 서브넷 구분 비트 라는 것을 지정해주어야 하는데 항상 호스트 ID에서 왼쪽부터 결정이 되어야 한다는 특징이 있다.

호스트 ID의 첫번째 비트를 서브넷 구분 비트로 지정하게 되면, 두 개의 Subnet으로 분리되게 된다.

- 192.168.10.0 ~ 192.168.10.127
- 192.168.10.128 ~ 192.168.10.255

호스트 ID의 두번째 비트까지 서브넷 구분 비트로 지정하게 되면 00, 01, 10, 11로 총 4개의 Subnet으로 분리되게 된다.

### ✏️ Classless Inter-Domain Routing

클래스 없는 도메인간 라우팅 기법이라는 뜻으로 단 한 줄만으로 네트워크 범위를 추측 또는 측정할 수 있다.

또, 필요에 따라 /24의 숫자를 더 쓰거나 적게 사용하여 IP주소 클래스 체계를 사용하는 것보다 더욱 더 능동적으로 IP를 할당할 수 있다.

***192.168.10.70/26***

- IP 주소 : 192.168.10.70
- Subnet Mask : 255.255.255.192

Subnet Mask의 1의 갯수가 26개이면 네번째 옥텟의 최상위 2개의 비트가 1이고 나머지 6비트를 호스트 ID로 할당하게 된다.

호스트 ID가 11000000가 되며 10진법으로 192가 된다. 그래서 Subnet Mask가 255.255.255.192가 된다.

```
11000000 10101000 00001010 01000110
11111111 11111111 11111111 11000000

11000000 10101000 00001010 01000000 
11000000 10101000 00001010 01111111
```

계산하면 192.168.10.70/26의 IP 주소 범위는 192.168.10.64 ~ 192.168.10.127이 된다.

***AWS에서 사용하는 IP 주소***
- 10.0.0.0 : 네트워크 주소
- 10.0.0.1 : Default 게이트웨이
- 10.0.0.2 : DNS 서버 주소
- 10.0.0.3 : 미래에 사용될 예약 주소
- 10.0.0.255 : 브로드 캐스트 주소

### ✏️ CIDR 계산기

- [cidr.xyz](https://cidr.xyz/)
- [ipaddressguide.com](https://www.ipaddressguide.com/)
- [network00.com](https://network00.com/NetworkTools/IPv4AddressPlanner/)

참고 자료
- [네트워크 구축 및 운용_7주차_1_IP Address](https://www.youtube.com/watch?v=b7Wk-6w5vgg)
- [IP 클래스, 서브넷 마스크, 서브넷팅 완벽 이해하기](https://inpa.tistory.com/entry/WEB-IP-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%84%9C%EB%B8%8C%EB%84%B7-%EB%A7%88%EC%8A%A4%ED%81%AC-%EC%84%9C%EB%B8%8C%EB%84%B7%ED%8C%85-%EC%B4%9D%EC%A0%95%EB%A6%AC)
